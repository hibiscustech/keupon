  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (2.5ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (44.1ms)[0m   [0;1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (22.3ms)[0m   [0mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
  [4;36;1mSQL (6.2ms)[0m   [0;1m

 CREATE TABLE `merchants` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) unsigned NOT NULL,
 `deleted` enum('Yes','No') NOT NULL DEFAULT 'No',
 `login` varchar(50) DEFAULT NULL,
 `email` varchar(50) DEFAULT NULL,
 `salt` varchar(50) DEFAULT NULL,
 `crypted_password` varchar(255) DEFAULT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;


 [0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913061220')[0m
Migrating to CreateCompanies (20100913061234)
  [4;36;1mSQL (6.7ms)[0m   [0;1mCREATE TABLE `companies` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913061234')[0m
Migrating to CreateMerchantProfiles (20100913062429)
  [4;36;1mSQL (8.1ms)[0m   [0;1mCREATE TABLE `merchant_profiles` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.2ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062429')[0m
Migrating to CreateCustomers (20100913062452)
  [4;36;1mSQL (13.0ms)[0m   [0;1mCREATE TABLE `customers` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062452')[0m
Migrating to CreateCustomerProfiles (20100913062508)
  [4;36;1mSQL (6.3ms)[0m   [0;1mCREATE TABLE `customer_profiles` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062508')[0m
Migrating to CreateDealCategories (20100913062545)
  [4;36;1mSQL (6.1ms)[0m   [0;1mCREATE TABLE `deal_categories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062545')[0m
Migrating to CreateDealSubCategories (20100913062640)
  [4;36;1mSQL (3.8ms)[0m   [0;1mCREATE TABLE `deal_sub_categories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062640')[0m
Migrating to CreateCustomerFavouriteDeals (20100913062716)
  [4;36;1mSQL (5.1ms)[0m   [0;1mCREATE TABLE `customer_favourite_deals` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062716')[0m
Migrating to CreateDealTypes (20100913062729)
  [4;36;1mSQL (5.8ms)[0m   [0;1mCREATE TABLE `deal_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062729')[0m
Migrating to CreateDeals (20100913062738)
  [4;36;1mSQL (3.5ms)[0m   [0;1mCREATE TABLE `deals` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062738')[0m
Migrating to CreateDealSchedules (20100913062750)
  [4;36;1mSQL (3.4ms)[0m   [0;1mCREATE TABLE `deal_schedules` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062750')[0m
Migrating to CreateDealLocationDetails (20100913062818)
  [4;36;1mSQL (4.9ms)[0m   [0;1mCREATE TABLE `deal_location_details` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (19.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913062818')[0m
Migrating to CreateCustomerDeals (20100913065746)
  [4;36;1mSQL (5.5ms)[0m   [0;1mCREATE TABLE `customer_deals` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (2.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913065746')[0m
Migrating to CreateCustomerKupoints (20100913065815)
  [4;36;1mSQL (4.8ms)[0m   [0;1mCREATE TABLE `customer_kupoints` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913065815')[0m
Migrating to CreateCustomerCreditCards (20100913065854)
  [4;36;1mSQL (3.6ms)[0m   [0;1mCREATE TABLE `customer_credit_cards` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913065854')[0m
Migrating to CreateCustomerDealTransactions (20100913070009)
  [4;36;1mSQL (3.3ms)[0m   [0;1mCREATE TABLE `customer_deal_transactions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913070009')[0m
Migrating to CreateConstants (20100913070125)
  [4;36;1mSQL (3.4ms)[0m   [0;1mCREATE TABLE `constants` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913070125')[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW FIELDS FROM `companies`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mdescribe `companies`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `companies`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `constants`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `constants`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `constants`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `customer_credit_cards`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `customer_credit_cards`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `customer_credit_cards`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `customer_deal_transactions`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mdescribe `customer_deal_transactions`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `customer_deal_transactions`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW FIELDS FROM `customer_deals`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `customer_deals`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `customer_deals`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW FIELDS FROM `customer_favourite_deals`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `customer_favourite_deals`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `customer_favourite_deals`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `customer_kupoints`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `customer_kupoints`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `customer_kupoints`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `customer_profiles`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `customer_profiles`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `customer_profiles`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `customers`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mdescribe `customers`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW KEYS FROM `customers`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `deal_categories`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `deal_categories`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `deal_categories`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW FIELDS FROM `deal_location_details`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `deal_location_details`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `deal_location_details`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `deal_schedules`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mdescribe `deal_schedules`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `deal_schedules`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `deal_sub_categories`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `deal_sub_categories`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `deal_sub_categories`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW FIELDS FROM `deal_types`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `deal_types`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `deal_types`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `deals`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `deals`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `deals`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `merchant_profiles`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mdescribe `merchant_profiles`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `merchant_profiles`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW FIELDS FROM `merchants`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `merchants`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW KEYS FROM `merchants`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (245.9ms)[0m   [0;1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (11.2ms)[0m   [0mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
  [4;36;1mSQL (4.4ms)[0m   [0;1m

 CREATE TABLE `merchants` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) unsigned NOT NULL,
 `deleted` enum('Yes','No') NOT NULL DEFAULT 'No',
 `login` varchar(50) DEFAULT NULL,
 `email` varchar(50) DEFAULT NULL,
 `salt` varchar(50) DEFAULT NULL,
 `crypted_password` varchar(255) DEFAULT NULL,
 `activation_code` varchar(255) DEFAULT NULL,
 `activated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;


 [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100913061220')[0m
Migrating to CreateCompanies (20100913061234)
  [4;36;1mSQL (0.0ms)[0m   [0;1mMysql::Error: Incorrect table definition; there can be only one auto column and it must be defined as a key: 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `comapnies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `comapnies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'PRIMARY KEY (`id`)
 ) ENGINE=InnoDB' at line 17: 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `comapnies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `comapnies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `companies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE

 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `companies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE

 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_profile_id` (`merchant_profile_id`),
 CONSTRAINT `companies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_profile_id` (`merchant_profile_id`),
 FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateCompanies (20100913061234)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.companies' (errno: 150): 
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 CONSTRAINT `companies_ibfk_1` FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
  [4;35;1mSQL (47.1ms)[0m   [0m
 
 CREATE TABLE `merchant_profiles` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `first_name` varchar(30) NOT NULL,
 `last_name` varchar(30) DEFAULT NULL,
 `gender` enum('m','f') NOT NULL DEFAULT 'm',
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `contact_number` varchar(15) NOT NULL,
 `email_address` varchar(50) NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 `dob` int(11) unsigned DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `merchant_id` (`merchant_id`),
 CONSTRAINT `merchant_profiles_ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913061234')[0m
Migrating to CreateCompanies (20100913062429)
  [4;35;1mSQL (3.9ms)[0m   [0m
 Create table `companies` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `website` varchar(50) NOT NULL,
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `latitude` varchar(50),
 `longitude` varchar(50),
 `detail` text NOT NULL,
 `logo` varchar(50),
 `merchant_profile_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 FOREIGN KEY (`merchant_profile_id`) REFERENCES `merchant_profiles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (11.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062429')[0m
Migrating to CreateCustomers (20100913062452)
  [4;35;1mSQL (4.8ms)[0m   [0m
 
 CREATE TABLE `customers` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) unsigned NOT NULL,
 `deleted` enum('Yes','No') NOT NULL DEFAULT 'No',
 `login` varchar(50) DEFAULT NULL,
 `email` varchar(50) DEFAULT NULL,
 `salt` varchar(50) DEFAULT NULL,
 `crypted_password` varchar(255) DEFAULT NULL,
 `kupoints` int(11) unsigned Not Null,
 `activation_code` varchar(255) DEFAULT NULL,
 `activated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;
 
 [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062452')[0m
Migrating to CreateCustomerProfiles (20100913062508)
  [4;35;1mSQL (4.0ms)[0m   [0m
 CREATE TABLE `customer_profiles` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `first_name` varchar(30) NOT NULL,
 `last_name` varchar(30) DEFAULT NULL,
 `gender` enum('m','f') NOT NULL DEFAULT 'm',
 `address1` varchar(50) NOT NULL,
 `address2` varchar(50) DEFAULT NULL,
 `city` varchar(30) NOT NULL,
 `state` varchar(30) NOT NULL,
 `zipcode` varchar(10) NOT NULL,
 `contact_number` varchar(15) NOT NULL,
 `email_address` varchar(50) NOT NULL,
 `customer_id` int(11) unsigned NOT NULL,
 `dob` int(11) unsigned DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `customer_id` (`customer_id`),
 CONSTRAINT `customer_profiles_ibfk_1` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (17.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062508')[0m
Migrating to CreateDealCategories (20100913062545)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') ENGINE=InnoDB' at line 4: 

 CREATE TABLE `deal_categories` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Incorrect table definition; there can be only one auto column and it must be defined as a key: 

 CREATE TABLE `deal_categories` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
  [4;35;1mSQL (44.0ms)[0m   [0m

 CREATE TABLE `deal_categories` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062545')[0m
Migrating to CreateDealSubCategories (20100913062640)
  [4;35;1mSQL (17.8ms)[0m   [0m
 CREATE TABLE `deal_sub_categories` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `deal_category_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_category_id` (`deal_category_id`),
 CONSTRAINT `deal_sub_categories _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062640')[0m
Migrating to CreateCustomerFavouriteDeals (20100913062716)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Incorrect table definition; there can be only one auto column and it must be defined as a key: 
 CREATE TABLE `customer_favourite_deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_id` int(11) unsigned NOT NULL,
 `deal_category_id` int(11) unsigned NOT NULL,
 `deal_sub_category_id` int(11) unsigned NOT NULL,
 KEY `customer_id` (`customer_id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_category_id`),
 CONSTRAINT `cfd _ibfk_3` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
  [4;35;1mSQL (34.3ms)[0m   [0m
 CREATE TABLE `customer_favourite_deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_id` int(11) unsigned NOT NULL,
 `deal_category_id` int(11) unsigned NOT NULL,
 `deal_sub_category_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `customer_id` (`customer_id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_category_id`),
 CONSTRAINT `cfd _ibfk_3` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062716')[0m
Migrating to CreateDealTypes (20100913062729)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') ENGINE=InnoDB' at line 4: 
 CREATE TABLE `deal_types` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
  [4;35;1mSQL (57.7ms)[0m   [0m
 CREATE TABLE `deal_types` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062729')[0m
Migrating to CreateDeals (20100913062738)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'â€˜newâ€™,â€™openâ€™,â€™cancelledâ€™,â€™tippedâ€™,â€™expiredâ€™) not null defaul' at line 12: 

 CREATE TABLE `deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `buy` double not null,
 `value` double not null,
 `discount` double not null,
 `save` double not null,
 `number` int(11) not null,
 `deal_photo` int(11) not null,
 `rules` varchar(255),
 `highlights` varchar(255),
 `status` enum(â€˜newâ€™,â€™openâ€™,â€™cancelledâ€™,â€™tippedâ€™,â€™expiredâ€™) not null default â€˜newâ€™,
 `expiry_date` int(11) not null,
 `deal_type_id` int(11) unsigned NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_category_id`),
 KEY `merchant_id` (`merchant_id`),
 KEY `deal_type_id` (`deal_type_id`),
 CONSTRAINT `deal _ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal _ibfk_2` FOREIGN KEY (`deal_type_id`) REFERENCES `deal_types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;


 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'â€˜newâ€™,â€™openâ€™,â€™cancelledâ€™,â€™tippedâ€™,â€™expiredâ€™) not null defaul' at line 12: 

 CREATE TABLE `deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `buy` double not null,
 `value` double not null,
 `discount` double not null,
 `save` double not null,
 `number` int(11) not null,
 `deal_photo` int(11) not null,
 `rules` varchar(255),
 `highlights` varchar(255),
 `status` enum(â€˜newâ€™,â€™openâ€™,â€™cancelledâ€™,â€™tippedâ€™,â€™expiredâ€™) not null default â€˜newâ€™,
 `expiry_date` int(11) not null,
 `deal_type_id` int(11) unsigned NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_category_id`),
 KEY `merchant_id` (`merchant_id`),
 KEY `deal_type_id` (`deal_type_id`),
 CONSTRAINT `deal _ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal _ibfk_2` FOREIGN KEY (`deal_type_id`) REFERENCES `deal_types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;


 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Key column 'deal_category_id' doesn't exist in table: 

 CREATE TABLE `deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `buy` double not null,
 `value` double not null,
 `discount` double not null,
 `save` double not null,
 `number` int(11) not null,
 `deal_photo` int(11) not null,
 `rules` varchar(255),
 `highlights` varchar(255),
 `status` enum('new','open','cancelled','tipped','expired') not null default 'new',
 `expiry_date` int(11) not null,
 `deal_type_id` int(11) unsigned NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_category_id`),
 KEY `merchant_id` (`merchant_id`),
 KEY `deal_type_id` (`deal_type_id`),
 CONSTRAINT `deal _ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal _ibfk_2` FOREIGN KEY (`deal_type_id`) REFERENCES `deal_types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;


 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Can't create table 'keupons.deals' (errno: 121): 

 CREATE TABLE `deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `buy` double not null,
 `value` double not null,
 `discount` double not null,
 `save` double not null,
 `number` int(11) not null,
 `deal_photo` int(11) not null,
 `rules` varchar(255),
 `highlights` varchar(255),
 `status` enum('new','open','cancelled','tipped','expired') not null default 'new',
 `expiry_date` int(11) not null,
 `deal_type_id` int(11) unsigned NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 `deal_category_id` int(11) unsigned NOT NULL,
 `deal_sub_category_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_sub_category_id`),
 KEY `merchant_id` (`merchant_id`),
 KEY `deal_type_id` (`deal_type_id`),
 CONSTRAINT `deal _ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal _ibfk_2` FOREIGN KEY (`deal_type_id`) REFERENCES `deal_types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_1` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cfd _ibfk_2` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;


 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (7.0ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
  [4;35;1mSQL (47.5ms)[0m   [0m

 CREATE TABLE `deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(50) NOT NULL,
 `buy` double not null,
 `value` double not null,
 `discount` double not null,
 `save` double not null,
 `number` int(11) not null,
 `deal_photo` int(11) not null,
 `rules` varchar(255),
 `highlights` varchar(255),
 `status` enum('new','open','cancelled','tipped','expired') not null default 'new',
 `expiry_date` int(11) not null,
 `deal_type_id` int(11) unsigned NOT NULL,
 `merchant_id` int(11) unsigned NOT NULL,
 `deal_category_id` int(11) unsigned NOT NULL,
 `deal_sub_category_id` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_category_id` (`deal_category_id`),
 KEY `deal_sub_category_id` (`deal_sub_category_id`),
 KEY `merchant_id` (`merchant_id`),
 KEY `deal_type_id` (`deal_type_id`),
 CONSTRAINT `deal_ibfk_1` FOREIGN KEY (`merchant_id`) REFERENCES `merchants` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal_ibfk_2` FOREIGN KEY (`deal_type_id`) REFERENCES `deal_types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal_ibfk_3` FOREIGN KEY (`deal_category_id`) REFERENCES `deal_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `deal_ibfk_4` FOREIGN KEY (`deal_sub_category_id`) REFERENCES `deal_sub_categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;


 [0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062738')[0m
Migrating to CreateDealSchedules (20100913062750)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Key column 'deal_ id' doesn't exist in table: 

 CREATE TABLE `deal_schedules` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `deal_id` int(11) unsigned NOT NULL,
 `start_time` int(11) unsigned NOT NULL,
 `end_time` int(11) unsigned NOT NULL,
 KEY `deal_id` (`deal_ id`),
 CONSTRAINT `dealsch _ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Incorrect table definition; there can be only one auto column and it must be defined as a key: 

 CREATE TABLE `deal_schedules` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `deal_id` int(11) unsigned NOT NULL,
 `start_time` int(11) unsigned NOT NULL,
 `end_time` int(11) unsigned NOT NULL,
 KEY `deal_id` (`deal_id`),
 CONSTRAINT `dealsch_ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
  [4;35;1mSQL (121.0ms)[0m   [0m

 CREATE TABLE `deal_schedules` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `deal_id` int(11) unsigned NOT NULL,
 `start_time` int(11) unsigned NOT NULL,
 `end_time` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_id` (`deal_id`),
 CONSTRAINT `dealsch_ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062750')[0m
Migrating to CreateDealLocationDetails (20100913062818)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Key column 'deal_ id' doesn't exist in table: 

 CREATE TABLE `deal_location_details` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `deal_id` int(11) unsigned NOT NULL,
 KEY `deal_id` (`deal_ id`),
 `address1` varchar(50),
 `address2` varchar(50),
 `city` varchar(30),
 `state` varchar(30) ,
 `zipcode` varchar(10),
 `latitude` varchar(50),
 `longitude` varchar(50),
 PRIMARY KEY (`id`),
 CONSTRAINT `dld _ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
  [4;35;1mSQL (9.6ms)[0m   [0m

 CREATE TABLE `deal_location_details` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `deal_id` int(11) unsigned NOT NULL,
 KEY `deal_id` (`deal_id`),
 `address1` varchar(50),
 `address2` varchar(50),
 `city` varchar(30),
 `state` varchar(30) ,
 `zipcode` varchar(10),
 `latitude` varchar(50),
 `longitude` varchar(50),
 PRIMARY KEY (`id`),
 CONSTRAINT `dld _ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;

 [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913062818')[0m
Migrating to CreateCustomerDeals (20100913065746)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Key column 'deal_ id' doesn't exist in table: 
 CREATE TABLE `customer_deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_id` int(11) unsigned NOT NULL,
 `deal_id` int(11) unsigned NOT NULL,
 `quantity` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_id` (`deal_ id`),
 KEY `customer_id` (`customer_ id`),
 CONSTRAINT `cds _ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cds _ibfk_2` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
  [4;35;1mSQL (85.3ms)[0m   [0m
 CREATE TABLE `customer_deals` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_id` int(11) unsigned NOT NULL,
 `deal_id` int(11) unsigned NOT NULL,
 `quantity` int(11) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `deal_id` (`deal_id`),
 KEY `customer_id` (`customer_id`),
 CONSTRAINT `cds _ibfk_1` FOREIGN KEY (`deal_id`) REFERENCES `deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cds _ibfk_2` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913065746')[0m
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insigned NOT NULL,
 `status` enum(â€˜pendingâ€™,â€™earnedâ€™,â€™redeeme' at line 5: 

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) insigned NOT NULL,
 `status` enum(â€˜pendingâ€™,â€™earnedâ€™,â€™redeemedâ€™) default â€˜pendingâ€™,
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insigned NOT NULL,
 `status` enum('pending','earned','redeemed') defaul' at line 5: 

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) insigned NOT NULL,
 `status` enum('pending','earned','redeemed') default 'pending,
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insigned NOT NULL,
 `status` enum('pending','earned','redeemed') defaul' at line 5: 

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) insigned NOT NULL,
 `status` enum('pending','earned','redeemed') default 'pending',
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insigned NOT NULL,
 `status` enum('pending','earned','redeemed') not nu' at line 5: 

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) insigned NOT NULL,
 `status` enum('pending','earned','redeemed') not null default 'pending',
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insigned NOT NULL,
 `status` enum('pending','earned','redeemed') not nu' at line 5: 

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) insigned NOT NULL,
 `status` enum('pending','earned','redeemed') not null default 'pending',
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
  [4;35;1mSQL (55.2ms)[0m   [0m

 CREATE TABLE `customer_kupoints` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `kupoints` int(11) unsigned NOT NULL,
 `time_created` int(11) unsigned NOT NULL,
 `status` enum('pending','earned','redeemed') not null default 'pending',
 PRIMARY KEY (`id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cps _ibfk_1` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913065815')[0m
Migrating to CreateCustomerCreditCards (20100913065854)
  [4;35;1mSQL (125.8ms)[0m   [0m
 CREATE TABLE `customer_credit_cards` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) NOT NULL,
 `time_modified` int(11) NOT NULL,
 `deleted` enum('Yes','No') NOT NULL default 'No',
 `customer_id` int(11) unsigned NOT NULL,
 `credit_card_number` varchar(50) NOT NULL,
 `expiration_month` int(11) NOT NULL,
 `expiration_year` int(11) NOT NULL,
 `card_type` varchar(25) NOT NULL,
 `address1` varchar(50) default NULL,
 `address2` varchar(50) default NULL,
 `city` varchar(50) default NULL,
 `state` varchar(50) default NULL,
 `zipcode` varchar(25) default NULL,
 `phone` varchar(25) default NULL,
 `country` varchar(50) default NULL,
 `first_name` varchar(50) default NULL,
 `last_name` varchar(50) default NULL,
 `cvv2` varchar(25) default NULL,
 PRIMARY KEY (`id`),
 KEY `customer_id` (`customer_id`),
 CONSTRAINT `customer_credit_cards_ibfk_1` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913065854')[0m
Migrating to CreateCustomerDealTransactions (20100913070009)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'â€˜successâ€™,â€™failureâ€™),
 `transaction_key` varchar(255) default' at line 10: 
 CREATE TABLE `customer_deal_transactions` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) NOT NULL,
 `transaction_type` enum('Preauth','Postauth') NOT NULL,
 `customer_credit_card_id` int(11) unsigned NOT NULL,
 `amount` double NOT NULL,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `error_message` text,
 `message` text,
 `status` enum(â€˜successâ€™,â€™failureâ€™),
 `transaction_key` varchar(255) default NULL,
 `payment_type` enum('Direct','Reference') default â€˜Referenceâ€™,
 PRIMARY KEY (`id`),
 KEY `customer_credit_card_id` (`customer_credit_card_id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cdt_ibfk_1` FOREIGN KEY (`customer_credit_card_id`) REFERENCES `customer_credit_cards` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cdt_ibfk_2` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB ;
 [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
Migrating to CreateCustomerCreditCards (20100913065854)
Migrating to CreateCustomerDealTransactions (20100913070009)
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'â€˜Referenceâ€™,
 PRIMARY KEY (`id`),
 KEY `customer_cred' at line 12: 
 CREATE TABLE `customer_deal_transactions` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) NOT NULL,
 `transaction_type` enum('Preauth','Postauth') NOT NULL,
 `customer_credit_card_id` int(11) unsigned NOT NULL,
 `amount` double NOT NULL,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `error_message` text,
 `message` text,
 `status` enum('success','failure'),
 `transaction_key` varchar(255) default NULL,
 `payment_type` enum('Direct','Reference') default â€˜Referenceâ€™,
 PRIMARY KEY (`id`),
 KEY `customer_credit_card_id` (`customer_credit_card_id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cdt_ibfk_1` FOREIGN KEY (`customer_credit_card_id`) REFERENCES `customer_credit_cards` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cdt_ibfk_2` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB ;
 [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateMerchants (20100913061220)
Migrating to CreateMerchantProfiles (20100913061234)
Migrating to CreateCompanies (20100913062429)
Migrating to CreateCustomers (20100913062452)
Migrating to CreateCustomerProfiles (20100913062508)
Migrating to CreateDealCategories (20100913062545)
Migrating to CreateDealSubCategories (20100913062640)
Migrating to CreateCustomerFavouriteDeals (20100913062716)
Migrating to CreateDealTypes (20100913062729)
Migrating to CreateDeals (20100913062738)
Migrating to CreateDealSchedules (20100913062750)
Migrating to CreateDealLocationDetails (20100913062818)
Migrating to CreateCustomerDeals (20100913065746)
Migrating to CreateCustomerKupoints (20100913065815)
Migrating to CreateCustomerCreditCards (20100913065854)
Migrating to CreateCustomerDealTransactions (20100913070009)
  [4;35;1mSQL (85.6ms)[0m   [0m
 CREATE TABLE `customer_deal_transactions` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `time_created` int(11) NOT NULL,
 `transaction_type` enum('Preauth','Postauth') NOT NULL,
 `customer_credit_card_id` int(11) unsigned NOT NULL,
 `amount` double NOT NULL,
 `customer_deal_id` int(11) unsigned NOT NULL,
 `error_message` text,
 `message` text,
 `status` enum('success','failure'),
 `transaction_key` varchar(255) default NULL,
 `payment_type` enum('Direct','Reference') not null default 'Reference',
 PRIMARY KEY (`id`),
 KEY `customer_credit_card_id` (`customer_credit_card_id`),
 KEY `customer_deal_id` (`customer_deal_id`),
 CONSTRAINT `cdt_ibfk_1` FOREIGN KEY (`customer_credit_card_id`) REFERENCES `customer_credit_cards` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `cdt_ibfk_2` FOREIGN KEY (`customer_deal_id`) REFERENCES `customer_deals` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB ;
 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913070009')[0m
Migrating to CreateConstants (20100913070125)
  [4;35;1mSQL (3.5ms)[0m   [0m
 CREATE TABLE `constants` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(30) not null,
 `value` varchar(255) not null,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB ;
 [0m
  [4;36;1mSQL (23.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100913070125')[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW FIELDS FROM `companies`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `companies`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `companies`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW FIELDS FROM `constants`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `constants`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `constants`[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mSHOW FIELDS FROM `customer_credit_cards`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `customer_credit_cards`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `customer_credit_cards`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `customer_deal_transactions`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `customer_deal_transactions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `customer_deal_transactions`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW FIELDS FROM `customer_deals`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `customer_deals`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `customer_deals`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `customer_favourite_deals`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `customer_favourite_deals`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `customer_favourite_deals`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `customer_kupoints`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `customer_kupoints`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `customer_kupoints`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `customer_profiles`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `customer_profiles`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `customer_profiles`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW FIELDS FROM `customers`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `customers`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `customers`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW FIELDS FROM `deal_categories`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `deal_categories`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `deal_categories`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `deal_location_details`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `deal_location_details`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `deal_location_details`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW FIELDS FROM `deal_schedules`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mdescribe `deal_schedules`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `deal_schedules`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `deal_sub_categories`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `deal_sub_categories`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `deal_sub_categories`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW FIELDS FROM `deal_types`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `deal_types`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `deal_types`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `deals`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `deals`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `deals`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `merchant_profiles`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `merchant_profiles`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `merchant_profiles`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `merchants`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `merchants`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `merchants`[0m
